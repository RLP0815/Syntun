<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="security" uri="http://www.springframework.org/security/tags"%>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta charset="utf-8">
	<title>获取网页代码</title>
	<%@include file="/page/include/getUserInfo.jsp"%>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=no">
	<link rel="stylesheet" href="../../../layui/css/layui.css" media="all" />
	<!-- <link rel="stylesheet" href="../../../css/public.css" media="all" /> -->
</head>
<script type="text/javascript">
	var nickName = '<%=nickName%>';
	var userId = '<%=userId%>';
	var userName = '<%=userName%>';
	var email = '<%=email%>';
	var phoneno = '<%=phoneno%>';
<%-- 	var authorities = '<%=authorities%>'; --%>
</script>

<body>
	<input id="ctx" style="display:none" value="${pageContext.request.contextPath}">
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
		<legend>获取网页所需参数</legend>
	</fieldset>
	<form class="layui-form">
		<div class="layui-form-item">
		    <label class="layui-form-label">URL</label>
		    <div class="layui-input-block">
				<input type="text" class="layui-input url" lay-verify="" autocomplete="off" placeholder="请输入URL">
		    </div>
		</div>
		<div class="layui-form-item">
		    <label class="layui-form-label">父URL</label>
		    <div class="layui-input-block">
				<input type="text" class="layui-input urlParent" lay-verify="" autocomplete="off" placeholder="请输入父URL">
		    </div>
		</div>
		<div class="layui-form-item">
		    <label class="layui-form-label">cookie</label>
		    <div class="layui-input-block">
				<input type="text" class="layui-input cookie" lay-verify="" autocomplete="off" placeholder="请输入Cookie">
		    </div>
		</div>
		<div class="layui-form-item">
		    <label class="layui-form-label">userAgent</label>
		    <div class="layui-input-block">
				<input type="text" class="layui-input userAgent" lay-verify="" autocomplete="off" placeholder="请输入UserAgent">
		    </div>
		</div>
		<div class="layui-form-item">
			<div class="layui-input-block">
				<button class="layui-btn urlSubmit" lay-submit="" lay-filter="urlSubmit">立即提交</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			</div>
		</div>
	</form>

<script type="text/javascript" src="../../../layui/layui.js"></script>
<script type="text/javascript">
layui.use(['form','layer','laytpl'],function(){

	var form = layui.form,
        layer = parent.layer === undefined ? layui.layer : top.layer,
        $ = layui.jquery,
        laytpl = layui.laytpl;
        
	//立即提交
	form.on("submit(urlSubmit)",function(data){
		//弹出loading
		var index = top.layer.msg('数据提交中，请稍候',{icon: 16,time:false,shade:0.8});
		$.post($("#ctx").attr("value") + '/baseController/getUrl.ht',{
		   url : $(".url").val(),
		   urlParent : $(".urlParent").val(),
		   cookie : $(".cookie").val(),
		   userAgent : $(".userAgent").val(),
	    },function(res){
	    	if(JSON.parse(res).code == 0){ 
				top.layer.msg(JSON.parse(res).msg); 
	        }else{
	        	layer.alert(JSON.parse(res).msg, {
	        		icon: 5,
	        		title: "警告"
	        	});
	        } 
	    })
	    return false;
	});    
})

	
</script>
</body>
</html>